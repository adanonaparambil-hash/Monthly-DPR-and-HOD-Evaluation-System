<div class="monthly-dpr-page" [@slideIn]>
  <!-- Header -->
  <div class="header-section" [@scaleIn]>
    <div class="header-content">
      <h1>Monthly DPR Report</h1>
      <p><i class="fas fa-calendar-alt"></i> {{ monthYear }}</p>
    </div>
    <div class="header-actions">
      <button class="btn-switch" (click)="switchToEmployee()">Switch to Employee</button>
      <button class="btn-hod" (click)="addNewHod()">HOD View</button>
    </div>
  </div>

  <!-- Employee Info Card -->
  <div class="info-card" [@scaleIn]>
    <div class="info-row">
      <div class="info-item">
        <label>Emp Id</label>
        <input [(ngModel)]="empId" placeholder="Enter employee ID">
      </div>
      <div class="info-item">
        <label>Name</label>
        <input [(ngModel)]="empName" placeholder="Enter your full name">
      </div>
      <div class="info-item">
        <label>Designation</label>
        <input [(ngModel)]="designation" placeholder="Enter your designation">
      </div>
      <div class="info-item">
        <label>Department</label>
        <select [(ngModel)]="department">
          <option>Select department</option>
          <option>IT</option>
          <option>HR</option>
          <option>Finance</option>
        </select>
      </div>
    </div>
    <div class="info-row">
      <div class="info-item">
        <label>Reporting To</label>
        <input [(ngModel)]="reportingTo" placeholder="Enter reporting manager">
      </div>
    </div>
  </div>

  <!-- Support Needed Section -->
  <div class="support-card" [@scaleIn]>
    <h3>Support Needed / Suggestions</h3>
    <p>Specify the support you need from management, team or resources. Include any suggestions for process improvement...</p>
    <textarea [(ngModel)]="supportNeeded" placeholder="Enter your support requirements..."></textarea>
  </div>

  <!-- HOD Evaluation Section -->
  <div class="evaluation-card" [@scaleIn]>
    <div class="section-header" (click)="toggleHodEvaluation()">
      <div class="header-left">
        <i class="fas fa-star"></i>
        <span>HOD Evaluation</span>
      </div>
      <i class="fas" [class.fa-chevron-down]="showHodEvaluation" [class.fa-chevron-right]="!showHodEvaluation"></i>
    </div>
    
    <div class="evaluation-content" *ngIf="showHodEvaluation" [@fadeInUp]>
      <div class="evaluation-grid">
        <div class="eval-item">
          <label>Quality</label>
          <select [(ngModel)]="quality" class="rating-dropdown">
            <option value="">Rate out of 5</option>
            <option value="1">1 - Poor</option>
            <option value="2">2 - Below Average</option>
            <option value="3">3 - Average</option>
            <option value="4">4 - Good</option>
            <option value="5">5 - Excellent</option>
          </select>
        </div>
        <div class="eval-item">
          <label>Timeliness</label>
          <select [(ngModel)]="timeliness" class="rating-dropdown">
            <option value="">Rate out of 5</option>
            <option value="1">1 - Poor</option>
            <option value="2">2 - Below Average</option>
            <option value="3">3 - Average</option>
            <option value="4">4 - Good</option>
            <option value="5">5 - Excellent</option>
          </select>
        </div>
        <div class="eval-item">
          <label>Initiative</label>
          <select [(ngModel)]="initiative" class="rating-dropdown">
            <option value="">Rate out of 5</option>
            <option value="1">1 - Poor</option>
            <option value="2">2 - Below Average</option>
            <option value="3">3 - Average</option>
            <option value="4">4 - Good</option>
            <option value="5">5 - Excellent</option>
          </select>
        </div>
        <div class="eval-item">
          <label>Overall Score</label>
          <select [(ngModel)]="overallScore" class="rating-dropdown">
            <option value="">Rate out of 5</option>
            <option value="1">1 - Poor</option>
            <option value="2">2 - Below Average</option>
            <option value="3">3 - Average</option>
            <option value="4">4 - Good</option>
            <option value="5">5 - Excellent</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Management Remarks Section -->
  <div class="remarks-card" [@scaleIn]>
    <div class="section-header" (click)="toggleManagementRemarks()">
      <div class="header-left">
        <i class="fas fa-comment"></i>
        <span>Management Remarks</span>
      </div>
      <i class="fas" [class.fa-chevron-down]="showManagementRemarks" [class.fa-chevron-right]="!showManagementRemarks"></i>
    </div>
    
    <div class="remarks-content" *ngIf="showManagementRemarks" [@fadeInUp]>
      <p>Add your remarks about the employee's performance...</p>
      <textarea [(ngModel)]="managementRemarks" placeholder="Enter management remarks..."></textarea>
    </div>
  </div>

  <!-- Remarks History Section -->
  <div class="history-card" [@scaleIn]>
    <div class="section-header" (click)="toggleRemarksHistory()">
      <div class="header-left">
        <i class="fas fa-history"></i>
        <span>Remarks History</span>
      </div>
      <i class="fas" [class.fa-chevron-down]="showRemarksHistory" [class.fa-chevron-right]="!showRemarksHistory"></i>
    </div>
    
    <div class="history-content" *ngIf="showRemarksHistory" [@fadeInUp]>
      <div class="history-item" *ngFor="let remark of remarksHistory" [@scaleIn]>
        <div class="history-header">
          <div class="history-user">
            <i class="fas fa-user-circle"></i>
            <span class="user-name">{{ remark.name }}</span>
            <span class="status-badge" [class]="'status-' + remark.status.toLowerCase()">{{ remark.status }}</span>
          </div>
          <span class="history-date">{{ remark.date }}</span>
        </div>
        <p class="history-comment">{{ remark.comment }}</p>
      </div>
    </div>
  </div>

  <!-- Task Details Section -->
  <div class="task-card" [@scaleIn]>
    <div class="section-header">
      <h2>Task Details</h2>
      <button class="add-btn" (click)="addNewTask()">+ Add New Task</button>
    </div>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>SL NO</th>
            <th>TASK NAME</th>
            <th>DESCRIPTION + STATUS</th>
            <th>ESTIMATED HOURS</th>
            <th>ACTUAL HOURS</th>
            <th>PRODUCTIVITY %</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let task of tasks; let i = index" [@scaleIn]>
            <td>{{ i + 1 }}</td>
            <td><input [(ngModel)]="task.name" placeholder="Task name"></td>
            <td><input [(ngModel)]="task.description" placeholder="Description and status"></td>
            <td><input type="number" [(ngModel)]="task.estimatedHours" placeholder="0"></td>
            <td><input type="number" [(ngModel)]="task.actualHours" placeholder="0"></td>
            <td><input type="number" [(ngModel)]="task.productivity" placeholder="0"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- KPI Performance Section -->
  <div class="kpi-card" [@scaleIn]>
    <div class="section-header">
      <h2>KPI Performance</h2>
      <button class="add-btn" (click)="addNewKPI()">+ Add New KPI</button>
    </div>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>SL NO</th>
            <th>KPI</th>
            <th>KPI VALUE</th>
            <th>REMARKS</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let kpi of kpis; let i = index" [@scaleIn]>
            <td>{{ i + 1 }}</td>
            <td><input [(ngModel)]="kpi.name" placeholder="KPI name"></td>
            <td><input [(ngModel)]="kpi.value" placeholder="Value"></td>
            <td><input [(ngModel)]="kpi.remarks" placeholder="Remarks"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Achievements and Challenges -->
  <div class="achievements-challenges" [@scaleIn]>
    <div class="achievement-card">
      <h3>Achievements</h3>
      <p>Describe your major accomplishments, achievements, deliverables and quality deliverables...</p>
      <textarea [(ngModel)]="achievements" placeholder="Enter your achievements..."></textarea>
    </div>
    <div class="challenge-card">
      <h3>Challenges</h3>
      <p>Detail the challenges you encountered, the steps taken to address them...</p>
      <textarea [(ngModel)]="challenges" placeholder="Enter challenges faced..."></textarea>
    </div>
  </div>

  <!-- Action Buttons (Moved to Bottom) -->
  <div class="action-buttons bottom-action-buttons" [@scaleIn]>
    <button class="btn-draft colorful-btn" (click)="saveDraft()">
      <i class="fas fa-save"></i> Save as Draft
    </button>
    <button class="btn-available colorful-btn" (click)="makeAvailable()">
      <i class="fas fa-check"></i> Available
    </button>
    <button class="btn-approve colorful-btn" (click)="approveReport()">
      <i class="fas fa-thumbs-up"></i> Approve
    </button>
    <button class="btn-pushback colorful-btn" (click)="pushbackReport()">
      <i class="fas fa-undo"></i> Pushback
    </button>
  </div>
</div>
